<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mã hóa và Giải mã</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>

    <div class="container">
        <h1>Mã hóa và Giải mã</h1>
    
        <div class="input-section">
            <label for="inputText">Nhập văn bản hoặc tải lên file:</label>
            <textarea id="inputText" placeholder="Nhập văn bản tại đây..."></textarea>
    
            <label for="fileInput">Tải file văn bản (.txt):</label>
            <input type="file" id="fileInput" accept=".txt">
    
            <button id="clearFileButton" onclick="clearFile()">Xóa tệp đã chọn</button>
    
            <label for="encryptionType">Chọn kiểu mã hóa:</label>
            <select id="encryptionType" onchange="toggleKeyInput()">
                <option value="caesar">Caesar</option>
                <option value="substitution">Thay thế</option>
                <option value="affine">Affine</option>
                <option value="des">DES</option> 
            </select>
    
            <div id="caesarKeyInput">
                <label for="key">Nhập khóa K (0 - 25):</label>
                <input type="number" id="key" min="0" max="25" value="0">
            </div>
    
            <div id="substitutionKeyInput" style="display:none;">
                <label for="substitutionKey">Bảng thay thế (26 ký tự):</label>
                <input type="text" id="substitutionKey" value="QWERTYUIOPASDFGHJKLZXCVBNM">
                <button onclick="generateRandomSubstitutionKey()">Sinh khóa ngẫu nhiên (Thay thế)</button>
            </div>
    
            <div id="affineKeyInput" style="display:none;">
                <label for="affineKeyA">Nhập khóa A (phải là số nguyên có gcd(a, 26) = 1):</label>
                <input type="number" id="affineKeyA" value="1">
    
                <label for="affineKeyB">Nhập khóa B (0 - 25):</label>
                <input type="number" id="affineKeyB" min="0" max="25" value="0">
                
                <button onclick="generateRandomAffineKey()">Sinh khóa ngẫu nhiên (Affine)</button>
            </div>
    
            <button onclick="encrypt()">Mã hóa</button>
            <button onclick="decrypt()">Giải mã</button>
        </div>
    
        <div class="output-section">
            <div class="result">
                <div>
                    <h3>Bản mã:</h3>
                    <textarea id="encryptedText" readonly></textarea>
                </div>
                <div>
                    <h3>Bản gốc (Giải mã):</h3>
                    <textarea id="decryptedText" readonly></textarea>
                </div>
            </div>
    
            <button class="save-button" onclick="saveEncryptedText()">Lưu bản mã</button>
        </div>
    </div>
</body>
</html>
